### Redux란?

-앱 전반적인 부분에 걸쳐서 스테이트를 관리할 수 있게 해주는 시스템입니다.

### Redux가 필요한 State는?

(useState와 useReduce로 대체 가능합니다.)
-Cross-Component State: 여러 개의 컴포넌트가 하나의 스테이트를 공유할 때, props chain으로 state를 관리하고 싶지 않을 경우
-App-Wide State: 사용자 인증과 같이 앱 전반에 걸쳐서 스테이트 변동이 있을 때

Redux는 Context API와 비슷하게 여러 부분에 걸쳐 스테이트를 관리할 때 사용합니다.
다만, Context API를 사용하게 된다면 아래와 같이 가시성이 좋지 않고 복잡한 코드를 작성하게 될 수도 있습니다.
많은 컨텍스트와 프로바이더가 중첩되어 있는 경우를 피하고 하나의 컨텍스트가 지나치게 많은 상태를 관리하지 않도록 하기 위해 리덕스를 사용하는 경우가 많습니다.

![](https://velog.velcdn.com/images/dochi486/post/b55b319b-1c23-4266-a5cc-5677b0b2fb60/image.png)

![](https://velog.velcdn.com/images/dochi486/post/2d679fd2-1f8d-46a9-b1ec-35125e63f3d3/image.png)

또 다른 Redux를 사용해야하는 이유로는 성능과 관련된 점 입니다. Context API는 자주 변경되는 상태에 대해 최적화되어 있지 않으므로 성능 이슈가 발생할 수 있습니다. 규모가 작은 앱이라면 Context API를 사용해도 관계가 없지만, 프로젝트 규모가 크다면 리덕스를 사용하는 것이 좋습니다.

### 리덕스의 작동방식

![](https://velog.velcdn.com/images/dochi486/post/549d86c1-e7e9-47d4-89d1-2efac2312521/image.png)

- 리덕스는 하나의 Store를 가지고 모든 앱의 상태를 저장합니다. 다만 이 중앙 저장소 전체를 항상 관리할 필요가 없으므로 데이터를 저장해서 컴포넌트에서 쉽게 사용할 수 있습니다.
- 컴포넌트는 Store를 구독하여 필요한 데이터가 변경되었을 때 Store의 일부를 받아서 사용합니다.
- 중요한 점은 저장된 데이터를 절대로 컴포넌트에서 바로 조작하지 않는 것이며, Reducer 함수를 사용해서 Store의 데이터를 변경합니다. useReducer와는 다른 개념으로, Reducer함수는 입력을 받아 변환하고 새로운 출력과 결과를 반환합니다.
- 컴포넌트와 Reducer를 연결하는 것은 Action을 통해 가능합니다. 컴포넌트가 액션을 발송(dispatch)하여 리덕스가 액션을 리듀서로 보내서 리듀서가 새로운 데이터를 Store에 저장하게 됩니다.
- 새로운 데이터가 Store에 저장되면 구독 중이던 컴포넌트가 해당 데이터를 가지고 새롭게 렌더링하게 됩니다.

### 리듀서 함수

- 리듀서 함수는 항상 이전 스테이트와 발생한 액션 2개의 인자를 받으며 새로운 스테이트 객체를 반환합니다. 그렇기 때문에 리듀서 함수는 순수한 함수여야합니다. 순수한 함수란 동일한 입력을 했을 경우 항상 정확하게 같은 값을 반환하는 함수를 말합니다.
- 순수한 함수여야하기 때문에 http 요청이나 로컬 저장소에서 파일을 읽어오는 등의 행동을 하면 안됩니다!!
- 리듀서 함수는 리덕스가 제공하는 입력을 취하고 새로운 스테이트 객체를 반환하는 순수한 함수 여야합니다. 리듀서 함수가 반환하는 새로운 스테이트는 기존의 스테이트를 대체합니다.

```JavaScript
const store = redux.createStore(sampleReducer)
```

- Store는 리듀서 함수와 함께 사용해야 합니다.

### 본격적으로 React에서 Redux 사용하기

- React에서 Redux를 제대로 사용하기 위해서는 npm install redux만이 아니라 react-redux 패키지도 함께 설치해줘야 합니다.
- 이 패키지를 통해서 리액트가 리덕스 스토어와 리듀서에 간단하게 연결할 수 있습니다. 컴포넌트가 쉽게 구독을 할 수 있게 해줍니다.
